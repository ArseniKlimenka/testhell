SELECT 
  DISTINCT
  sat.ACTIVE_TYPE,
  hub.ASSET_NUMBER,
  sat.ID_ISIN,
  sat.BOND_DENOMINATION_IN_CURRENCY,
  sat.UNIT_PURCHASE_PRICE,
  sat.ASSET_SIZE,
  csat.LIMIT,
  sat.TERM,
  sat.PAPER_SHORT_NAME,
  sat.CURRENCY_CODE,
  sat.INFORMATION_RESOURCE
FROM PAS_IMPL.ASSET_HUB hub
INNER JOIN PAS_IMPL.ASSET_SAT_LATEST sat
	ON hub.ASSET_HKEY = sat.ASSET_HKEY 
		AND sat.STATE = 'Open'
INNER JOIN PAS_IMPL.ASSET_CONDITION_LINK cl
	ON cl.ASSET_HKEY = hub.ASSET_HKEY
INNER JOIN PAS_IMPL.ASSET_CONDITION_SAT csat
	ON csat.ASSET_CONDITION_HKEY = cl.ASSET_CONDITION_HKEY
INNER JOIN PAS_IMPL.ASSET_CONDITION_PRODUCT_VALUE pv
	ON pv.CONDITION_PRODUCT_REF_ID = csat.CONDITION_PRODUCT_REF_ID 
		AND pv.PRODUCT_CODE = @productCode
WHERE 1=1
{{#if parameters.insuranceTerms}}
	AND (TERM = @insuranceTerms)
{{/if}}
